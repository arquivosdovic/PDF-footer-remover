async function processOnServer() { const fileInput =
document.getElementById('pdfFile'); const footerH =
document.getElementById('footerH').value; const status =
document.getElementById('status'); if (!fileInput.files[0]) return
alert("Selecione o arquivo!"); status.innerText = "Limpando metadados e
streams..."; const formData = new FormData(); formData.append('file',
fileInput.files[0]); try { const response = await
fetch('/.netlify/functions/process_pdf', { method: 'POST', headers: {
'x-footer-height': footerH }, body: formData // Enviando como FormData }); if
(response.ok) { const blob = await response.blob(); const url =
window.URL.createObjectURL(blob); const a = document.createElement('a'); a.href
= url; a.download = "documento_limpo.pdf"; a.click(); status.innerText =
"Sucesso! Rodapé removido."; } else { const errorText = await response.text();
console.error(errorText); status.innerText = "Erro no processamento: " +
response.status; } } catch (e) { status.innerText = "Erro de conexão."; } }
